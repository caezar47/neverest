"use strict";var CMS__TPL_PATH="/wp-content/themes/azbn7theme",form_url="formsave.php",Azbn7__API__Request=function(e,t){return $.ajax({url:form_url,type:"POST",dataType:"json",data:e,success:t,error:function(e,t,a){console.warn(t)}}),this};$(function(){$("form.azbn7__api__form").on("submit",function(e){e.preventDefault()}).on("jqv.form.result",function(e,t){if(e.preventDefault(),t);else{var a=$(this),r=a,i=a.attr("data-method")||"formsave",n=a.attr("data-message")||"#modal-message";r.append($("<input/>",{type:"hidden",name:"method",value:i})),new Azbn7__API__Request(r.serialize(),function(e){r.trigger("reset"),a.trigger("reset"),a.closest(".modals").modal("hide"),$(n).modal()})}})}),function(T){var E={init:function(e){var t=this;return t.data("jqv")&&null!=t.data("jqv")||(e=E._saveOptions(t,e),T(document).on("click",".formError",function(){T(this).fadeOut(150,function(){T(this).closest(".formError").remove()})})),this},attach:function(e){var t,a=this;return(t=e?E._saveOptions(a,e):a.data("jqv")).validateAttribute=a.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",t.binded&&(a.on(t.validationEventTrigger,"["+t.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",E._onFieldEvent),a.on("click","["+t.validateAttribute+"*=validate][type=checkbox],["+t.validateAttribute+"*=validate][type=radio]",E._onFieldEvent),a.on(t.validationEventTrigger,"["+t.validateAttribute+"*=validate][class*=datepicker]",{delay:300},E._onFieldEvent)),t.autoPositionUpdate&&T(window).bind("resize",{noAnimation:!0,formElem:a},E.updatePromptsPosition),a.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",E._submitButtonClick),a.removeData("jqv_submitButton"),a.on("submit",E._onSubmitEvent),this},detach:function(){var e=this,t=e.data("jqv");return e.off(t.validationEventTrigger,"["+t.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",E._onFieldEvent),e.off("click","["+t.validateAttribute+"*=validate][type=checkbox],["+t.validateAttribute+"*=validate][type=radio]",E._onFieldEvent),e.off(t.validationEventTrigger,"["+t.validateAttribute+"*=validate][class*=datepicker]",E._onFieldEvent),e.off("submit",E._onSubmitEvent),e.removeData("jqv"),e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",E._submitButtonClick),e.removeData("jqv_submitButton"),t.autoPositionUpdate&&T(window).off("resize",E.updatePromptsPosition),this},validate:function(e){var t,a=T(this),r=null;if(a.is("form")||a.hasClass("validationEngineContainer")){if(a.hasClass("validating"))return!1;a.addClass("validating"),t=e?E._saveOptions(a,e):a.data("jqv");r=E._validateFields(this);setTimeout(function(){a.removeClass("validating")},100),r&&t.onSuccess?t.onSuccess():!r&&t.onFailure&&t.onFailure()}else{if(!a.is("form")&&!a.hasClass("validationEngineContainer")){var i=a.closest("form, .validationEngineContainer");return t=i.data("jqv")?i.data("jqv"):T.validationEngine.defaults,(r=E._validateField(a,t))&&t.onFieldSuccess?t.onFieldSuccess():t.onFieldFailure&&0<t.InvalidFields.length&&t.onFieldFailure(),!r}a.removeClass("validating")}return t.onValidationComplete?!!t.onValidationComplete(i,r):r},updatePromptsPosition:function(e){if(e&&this==window)var r=e.data.formElem,i=e.data.noAnimation;else r=T(this.closest("form, .validationEngineContainer"));var n=r.data("jqv");return n=n||E._saveOptions(r,n),r.find("["+n.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=T(this);n.prettySelect&&e.is(":hidden")&&(e=r.find("#"+n.usePrefix+e.attr("id")+n.useSuffix));var t=E._getPrompt(e),a=T(t).find(".formErrorContent").html();t&&E._updatePrompt(e,T(t),a,void 0,!1,n,i)}),this},showPrompt:function(e,t,a,r){var i=this.closest("form, .validationEngineContainer").data("jqv");return i=i||E._saveOptions(this,i),a&&(i.promptPosition=a),i.showArrow=1==r,E._showPrompt(this,e,t,!1,i),this},hide:function(){var e,t=T(this).closest("form, .validationEngineContainer"),a=t.data("jqv"),r=(a=a||E._saveOptions(t,a))&&a.fadeDuration?a.fadeDuration:.3;return e=t.is("form")||t.hasClass("validationEngineContainer")?"parentForm"+E._getClassName(T(t).attr("id")):E._getClassName(T(t).attr("id"))+"formError",T("."+e).fadeTo(r,0,function(){T(this).closest(".formError").remove()}),this},hideAll:function(){var e=this.data("jqv"),t=e?e.fadeDuration:300;return T(".formError").fadeTo(t,0,function(){T(this).closest(".formError").remove()}),this},_onFieldEvent:function(e){var t=T(this),a=t.closest("form, .validationEngineContainer"),r=a.data("jqv");(r=r||E._saveOptions(a,r)).eventTrigger="field",1==r.notEmpty?0<t.val().length&&window.setTimeout(function(){E._validateField(t,r)},e.data?e.data.delay:0):window.setTimeout(function(){E._validateField(t,r)},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=T(this),t=e.data("jqv");if(e.data("jqv_submitButton")){var a=T("#"+e.data("jqv_submitButton"));if(a&&0<a.length&&(a.hasClass("validate-skip")||"true"==a.attr("data-validation-engine-skip")))return!0}t.eventTrigger="submit";var r=E._validateFields(e);return r&&t.ajaxFormValidation?(E._validateFormWithAjax(e,t),!1):t.onValidationComplete?!!t.onValidationComplete(e,r):r},_checkAjaxStatus:function(e){var a=!0;return T.each(e.ajaxValidCache,function(e,t){if(!t)return a=!1}),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var r=a.data("jqv"),i=!1;a.trigger("jqv.form.validating");var n=null;if(a.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=T(this),t=[];if(T.inArray(e.attr("name"),t)<0){if((i|=E._validateField(e,r))&&null==n&&(n=e.is(":hidden")&&r.prettySelect?e=a.find("#"+r.usePrefix+E._jqSelector(e.attr("id"))+r.useSuffix):(e.data("jqv-prompt-at")instanceof jQuery?e=e.data("jqv-prompt-at"):e.data("jqv-prompt-at")&&(e=T(e.data("jqv-prompt-at"))),e)),r.doNotShowAllErrosOnSubmit)return!1;if(t.push(e.attr("name")),1==r.showOneMessage&&i)return!1}}),a.trigger("jqv.form.result",[i]),i){if(r.scroll){var e=n.offset().top,t=n.offset().left,o=r.promptPosition;if("string"==typeof o&&-1!=o.indexOf(":")&&(o=o.substring(0,o.indexOf(":"))),"bottomRight"!=o&&"bottomLeft"!=o){var l=E._getPrompt(n);l&&(e=l.offset().top)}if(r.scrollOffset&&(e-=r.scrollOffset),r.isOverflown){var s=T(r.overflownDIV);if(!s.length)return!1;e+=s.scrollTop()+-parseInt(s.offset().top)-5,T(r.overflownDIV).filter(":not(:animated)").animate({scrollTop:e},1100,function(){r.focusFirstField&&n.focus()})}else T("html, body").animate({scrollTop:e},1100,function(){r.focusFirstField&&n.focus()}),T("html, body").animate({scrollLeft:t},1100)}else r.focusFirstField&&n.focus();return!1}return!0},_validateFormWithAjax:function(s,u){var e=s.serialize(),t=u.ajaxFormValidationMethod?u.ajaxFormValidationMethod:"GET",a=u.ajaxFormValidationURL?u.ajaxFormValidationURL:s.attr("action"),d=u.dataType?u.dataType:"json";T.ajax({type:t,url:a,cache:!1,dataType:d,data:e,form:s,methods:E,options:u,beforeSend:function(){return u.onBeforeAjaxFormValidation(s,u)},error:function(e,t){u.onFailure?u.onFailure(e,t):E._ajaxError(e,t)},success:function(e){if("json"==d&&!0!==e){for(var t=!1,a=0;a<e.length;a++){var r=e[a],i=r[0],n=T(T("#"+i)[0]);if(1==n.length){var o=r[2];if(1==r[1])if(""!=o&&o){if(u.allrules[o])(l=u.allrules[o].alertTextOk)&&(o=l);u.showPrompts&&E._showPrompt(n,o,"pass",!1,u,!0)}else E._closePrompt(n);else{var l;if(t|=!0,u.allrules[o])(l=u.allrules[o].alertText)&&(o=l);u.showPrompts&&E._showPrompt(n,o,"",!1,u,!0)}}}u.onAjaxFormComplete(!t,s,e,u)}else u.onAjaxFormComplete(!0,s,e,u)}})},_validateField:function(e,t,a){if(e.attr("id")||(e.attr("id","form-validation-field-"+T.validationEngine.fieldIdCounter),++T.validationEngine.fieldIdCounter),e.hasClass(t.ignoreFieldsWithClass))return!1;if(!t.validateNonVisibleFields&&(e.is(":hidden")&&!t.prettySelect||e.parent().is(":hidden")))return!1;var r=e.attr(t.validateAttribute),i=/validate\[(.*)\]/.exec(r);if(!i)return!1;var n=i[1],o=n.split(/\[|,|\]/),l=e.attr("name"),s="",u="",d=!1,c=!1;t.isError=!1,t.showArrow=1==t.showArrow,0<t.maxErrorsPerField&&(c=!0);for(var f=T(e.closest("form, .validationEngineContainer")),p=0;p<o.length;p++)o[p]=o[p].toString().replace(" ",""),""===o[p]&&delete o[p];p=0;for(var v=0;p<o.length;p++){if(c&&v>=t.maxErrorsPerField){if(!d){var m=T.inArray("required",o);d=-1!=m&&p<=m}break}var g=void 0;switch(o[p]){case"required":d=!0,g=E._getErrorMessage(f,e,o[p],o,p,t,E._required);break;case"custom":g=E._getErrorMessage(f,e,o[p],o,p,t,E._custom);break;case"groupRequired":var F="["+t.validateAttribute+"*="+o[p+1]+"]",x=f.find(F).eq(0);x[0]!=e[0]&&(E._validateField(x,t,a),t.showArrow=!0),(g=E._getErrorMessage(f,e,o[p],o,p,t,E._groupRequired))&&(d=!0),t.showArrow=!1;break;case"ajax":(g=E._ajax(e,o,p,t))&&(u="load");break;case"minSize":g=E._getErrorMessage(f,e,o[p],o,p,t,E._minSize);break;case"maxSize":g=E._getErrorMessage(f,e,o[p],o,p,t,E._maxSize);break;case"min":g=E._getErrorMessage(f,e,o[p],o,p,t,E._min);break;case"max":g=E._getErrorMessage(f,e,o[p],o,p,t,E._max);break;case"past":g=E._getErrorMessage(f,e,o[p],o,p,t,E._past);break;case"future":g=E._getErrorMessage(f,e,o[p],o,p,t,E._future);break;case"dateRange":F="["+t.validateAttribute+"*="+o[p+1]+"]";t.firstOfGroup=f.find(F).eq(0),t.secondOfGroup=f.find(F).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(g=E._getErrorMessage(f,e,o[p],o,p,t,E._dateRange)),g&&(d=!0),t.showArrow=!1;break;case"dateTimeRange":F="["+t.validateAttribute+"*="+o[p+1]+"]";t.firstOfGroup=f.find(F).eq(0),t.secondOfGroup=f.find(F).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(g=E._getErrorMessage(f,e,o[p],o,p,t,E._dateTimeRange)),g&&(d=!0),t.showArrow=!1;break;case"maxCheckbox":e=T(f.find("input[name='"+l+"']")),g=E._getErrorMessage(f,e,o[p],o,p,t,E._maxCheckbox);break;case"minCheckbox":e=T(f.find("input[name='"+l+"']")),g=E._getErrorMessage(f,e,o[p],o,p,t,E._minCheckbox);break;case"equals":g=E._getErrorMessage(f,e,o[p],o,p,t,E._equals);break;case"funcCall":g=E._getErrorMessage(f,e,o[p],o,p,t,E._funcCall);break;case"creditCard":g=E._getErrorMessage(f,e,o[p],o,p,t,E._creditCard);break;case"condRequired":void 0!==(g=E._getErrorMessage(f,e,o[p],o,p,t,E._condRequired))&&(d=!0);break;case"funcCallRequired":void 0!==(g=E._getErrorMessage(f,e,o[p],o,p,t,E._funcCallRequired))&&(d=!0)}var h=!1;if("object"==typeof g)switch(g.status){case"_break":h=!0;break;case"_error":g=g.message;break;case"_error_no_prompt":return!0}if(0==p&&0==n.indexOf("funcCallRequired")&&void 0!==g&&(""!=s&&(s+="<br/>"),s+=g,v++,h=t.isError=!0),h)break;"string"==typeof g&&(""!=s&&(s+="<br/>"),s+=g,t.isError=!0,v++)}!d&&!e.val()&&e.val().length<1&&T.inArray("equals",o)<0&&(t.isError=!1);var _=e.prop("type"),C=e.data("promptPosition")||t.promptPosition;("radio"==_||"checkbox"==_)&&1<f.find("input[name='"+l+"']").length&&(e=T("inline"===C?f.find("input[name='"+l+"'][type!=hidden]:last"):f.find("input[name='"+l+"'][type!=hidden]:first")),t.showArrow=t.showArrowOnRadioAndCheckbox),e.is(":hidden")&&t.prettySelect&&(e=f.find("#"+t.usePrefix+E._jqSelector(e.attr("id"))+t.useSuffix)),t.isError&&t.showPrompts?E._showPrompt(e,s,u,!1,t):E._closePrompt(e),e.trigger("jqv.field.result",[e,t.isError,s]);var b=T.inArray(e[0],t.InvalidFields);return-1==b?t.isError&&t.InvalidFields.push(e[0]):t.isError||t.InvalidFields.splice(b,1),E._handleStatusCssClasses(e,t),t.isError&&t.onFieldFailure&&t.onFieldFailure(e),!t.isError&&t.onFieldSuccess&&t.onFieldSuccess(e),t.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(e,t,a,r,i,n,o){var l=jQuery.inArray(a,r);"custom"!==a&&"funcCall"!==a&&"funcCallRequired"!==a||(a=a+"["+r[l+1]+"]",delete r[l]);var s,u=a,d=(t.attr("data-validation-engine")?t.attr("data-validation-engine"):t.attr("class")).split(" ");if(null!=(s="future"==a||"past"==a||"maxCheckbox"==a||"minCheckbox"==a?o(e,t,r,i,n):o(t,r,i,n))){var c=E._getCustomErrorMessage(T(t),d,u,n);c&&(s=c)}return s},_getCustomErrorMessage:function(e,t,a,r){var i=!1,n=/^custom\[.*\]$/.test(a)?E._validityProp.custom:E._validityProp[a];if(null!=n&&null!=(i=e.attr("data-errormessage-"+n)))return i;if(null!=(i=e.attr("data-errormessage")))return i;var o="#"+e.attr("id");if(void 0!==r.custom_error_messages[o]&&void 0!==r.custom_error_messages[o][a])i=r.custom_error_messages[o][a].message;else if(0<t.length)for(var l=0;l<t.length&&0<t.length;l++){var s="."+t[l];if(void 0!==r.custom_error_messages[s]&&void 0!==r.custom_error_messages[s][a]){i=r.custom_error_messages[s][a].message;break}}return i||void 0===r.custom_error_messages[a]||void 0===r.custom_error_messages[a].message||(i=r.custom_error_messages[a].message),i},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(e,t,a,r,i){switch(e.prop("type")){case"radio":case"checkbox":if(i){if(!e.prop("checked"))return r.allrules[t[a]].alertTextCheckboxMultiple;break}var n=e.closest("form, .validationEngineContainer"),o=e.attr("name");if(0==n.find("input[name='"+o+"']:checked").length)return 1==n.find("input[name='"+o+"']:visible").length?r.allrules[t[a]].alertTextCheckboxe:r.allrules[t[a]].alertTextCheckboxMultiple;break;case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var l=T.trim(e.val()),s=T.trim(e.attr("data-validation-placeholder")),u=T.trim(e.attr("placeholder"));if(!l||s&&l==s||u&&l==u)return r.allrules[t[a]].alertText}},_groupRequired:function(e,t,a,r){var i="["+r.validateAttribute+"*="+t[a+1]+"]",n=!1;if(e.closest("form, .validationEngineContainer").find(i).each(function(){if(!E._required(T(this),t,a,r))return!(n=!0)}),!n)return r.allrules[t[a]].alertText},_custom:function(e,t,a,r){var i,n=t[a+1],o=r.allrules[n];if(o)if(o.regex){var l=o.regex;if(!l)return void alert("jqv:custom regex not found - "+n);if(!new RegExp(l).test(e.val()))return r.allrules[n].alertText}else{if(!o.func)return void alert("jqv:custom type not allowed "+n);if("function"!=typeof(i=o.func))return void alert("jqv:custom parameter 'function' is no function - "+n);if(!i(e,t,a,r))return r.allrules[n].alertText}else alert("jqv:custom rule not found - "+n)},_funcCall:function(e,t,a,r){var i,n=t[a+1];if(-1<n.indexOf(".")){for(var o=n.split("."),l=window;o.length;)l=l[o.shift()];i=l}else i=window[n]||r.customFunctions[n];if("function"==typeof i)return i(e,t,a,r)},_funcCallRequired:function(e,t,a,r){return E._funcCall(e,t,a,r)},_equals:function(e,t,a,r){var i=t[a+1];if(e.val()!=T("#"+i).val())return r.allrules.equals.alertText},_maxSize:function(e,t,a,r){var i=t[a+1];if(i<e.val().length){var n=r.allrules.maxSize;return n.alertText+i+n.alertText2}},_minSize:function(e,t,a,r){var i=t[a+1];if(e.val().length<i){var n=r.allrules.minSize;return n.alertText+i+n.alertText2}},_min:function(e,t,a,r){var i=parseFloat(t[a+1]);if(parseFloat(e.val())<i){var n=r.allrules.min;return n.alertText2?n.alertText+i+n.alertText2:n.alertText+i}},_max:function(e,t,a,r){var i=parseFloat(t[a+1]);if(i<parseFloat(e.val())){var n=r.allrules.max;return n.alertText2?n.alertText+i+n.alertText2:n.alertText+i}},_past:function(e,t,a,r,i){var n,o=a[r+1],l=T(e.find("*[name='"+o.replace(/^#+/,"")+"']"));if("now"==o.toLowerCase())n=new Date;else if(null!=l.val()){if(l.is(":disabled"))return;n=E._parseDate(l.val())}else n=E._parseDate(o);if(n<E._parseDate(t.val())){var s=i.allrules.past;return s.alertText2?s.alertText+E._dateToString(n)+s.alertText2:s.alertText+E._dateToString(n)}},_future:function(e,t,a,r,i){var n,o=a[r+1],l=T(e.find("*[name='"+o.replace(/^#+/,"")+"']"));if("now"==o.toLowerCase())n=new Date;else if(null!=l.val()){if(l.is(":disabled"))return;n=E._parseDate(l.val())}else n=E._parseDate(o);if(E._parseDate(t.val())<n){var s=i.allrules.future;return s.alertText2?s.alertText+E._dateToString(n)+s.alertText2:s.alertText+E._dateToString(n)}},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,t,a,r){return!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value?r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2:E._isDate(r.firstOfGroup[0].value)&&E._isDate(r.secondOfGroup[0].value)&&E._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2},_dateTimeRange:function(e,t,a,r){return!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value?r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2:E._isDateTime(r.firstOfGroup[0].value)&&E._isDateTime(r.secondOfGroup[0].value)&&E._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2},_maxCheckbox:function(e,t,a,r,i){var n=a[r+1],o=t.attr("name");if(n<e.find("input[name='"+o+"']:checked").length)return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+n+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,a,r,i){var n=a[r+1],o=t.attr("name");if(e.find("input[name='"+o+"']:checked").length<n)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+n+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,t,a,r){var i=!1,n=e.val().replace(/ +/g,"").replace(/-+/g,""),o=n.length;if(14<=o&&o<=16&&0<parseInt(n)){for(var l,s=0,u=(a=o-1,1),d=new String;l=parseInt(n.charAt(a)),d+=u++%2==0?2*l:l,0<=--a;);for(a=0;a<d.length;a++)s+=parseInt(d.charAt(a));i=s%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(o,e,t,l){var a=e[t+1],s=l.allrules[a],r=s.extraData,i=s.extraDataDynamic,n={fieldId:o.attr("id"),fieldValue:o.val()};if("object"==typeof r)T.extend(n,r);else if("string"==typeof r){var u=r.split("&");for(t=0;t<u.length;t++){var d=u[t].split("=");d[0]&&d[0]&&(n[d[0]]=d[1])}}if(i){var c=String(i).split(",");for(t=0;t<c.length;t++){var f=c[t];if(T(f).length){var p=o.closest("form, .validationEngineContainer").find(f).val();f.replace("#",""),escape(p);n[f.replace("#","")]=p}}}if("field"==l.eventTrigger&&delete l.ajaxValidCache[o.attr("id")],!l.isError&&!E._checkAjaxFieldStatus(o.attr("id"),l))return T.ajax({type:l.ajaxFormValidationMethod,url:s.url,cache:!1,dataType:"json",data:n,field:o,rule:s,methods:E,options:l,beforeSend:function(){},error:function(e,t){l.onFailure?l.onFailure(e,t):E._ajaxError(e,t)},success:function(e){var t=e[0],a=T("#"+t).eq(0);if(1==a.length){var r=e[1],i=e[2];if(r){if(l.ajaxValidCache[t]=!0,i){if(l.allrules[i])(n=l.allrules[i].alertTextOk)&&(i=n)}else i=s.alertTextOk;l.showPrompts&&(i?E._showPrompt(a,i,"pass",!0,l):E._closePrompt(a)),"submit"==l.eventTrigger&&o.closest("form").submit()}else{var n;if(l.ajaxValidCache[t]=!1,l.isError=!0,i){if(l.allrules[i])(n=l.allrules[i].alertText)&&(i=n)}else i=s.alertText;l.showPrompts&&E._showPrompt(a,i,"",!0,l)}}a.trigger("jqv.field.result",[a,l.isError,i])}}),s.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");return t==e&&(t=e.split("/")),t==e?(t=e.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(e,t,a,r,i,n){e.data("jqv-prompt-at")instanceof jQuery?e=e.data("jqv-prompt-at"):e.data("jqv-prompt-at")&&(e=T(e.data("jqv-prompt-at")));var o=E._getPrompt(e);n&&(o=!1),T.trim(t)&&(o?E._updatePrompt(e,o,t,a,r,i):E._buildPrompt(e,t,a,r,i))},_buildPrompt:function(e,t,a,r,i){var n=T("<div>");switch(n.addClass(E._getClassName(e.attr("id"))+"formError"),n.addClass("parentForm"+E._getClassName(e.closest("form, .validationEngineContainer").attr("id"))),n.addClass("formError"),a){case"pass":n.addClass("greenPopup");break;case"load":n.addClass("blackPopup")}r&&n.addClass("ajaxed");T("<div>").addClass("formErrorContent").html(t).appendTo(n);var o=e.data("promptPosition")||i.promptPosition;if(i.showArrow){var l=T("<div>").addClass("formErrorArrow");if("string"==typeof o)-1!=(d=o.indexOf(":"))&&(o=o.substring(0,d));switch(o){case"bottomLeft":case"bottomRight":n.find(".formErrorContent").before(l),l.addClass("formErrorArrowBottom");break;case"topLeft":case"topRight":l.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),n.append(l)}}i.addPromptClass&&n.addClass(i.addPromptClass);var s=e.attr("data-required-class");if(void 0!==s)n.addClass(s);else if(i.prettySelect&&T("#"+e.attr("id")).next().is("select")){var u=T("#"+e.attr("id").substr(i.usePrefix.length).substring(i.useSuffix.length)).attr("data-required-class");void 0!==u&&n.addClass(u)}n.css({opacity:0}),"inline"===o?(n.addClass("inline"),void 0!==e.attr("data-prompt-target")&&0<T("#"+e.attr("data-prompt-target")).length?n.appendTo(T("#"+e.attr("data-prompt-target"))):e.after(n)):e.before(n);var d=E._calculatePosition(e,n,i);return T("body").hasClass("rtl")?n.css({position:"inline"===o?"relative":"absolute",top:d.callerTopPosition,left:"initial",right:d.callerleftPosition,marginTop:d.marginTopSize,opacity:0}).data("callerField",e):n.css({position:"inline"===o?"relative":"absolute",top:d.callerTopPosition,left:d.callerleftPosition,right:"initial",marginTop:d.marginTopSize,opacity:0}).data("callerField",e),i.autoHidePrompt&&setTimeout(function(){n.animate({opacity:0},function(){n.closest(".formError").remove()})},i.autoHideDelay),n.animate({opacity:.87})},_updatePrompt:function(e,t,a,r,i,n,o){if(t){void 0!==r&&("pass"==r?t.addClass("greenPopup"):t.removeClass("greenPopup"),"load"==r?t.addClass("blackPopup"):t.removeClass("blackPopup")),i?t.addClass("ajaxed"):t.removeClass("ajaxed"),t.find(".formErrorContent").html(a);var l=E._calculatePosition(e,t,n);if(T("body").hasClass("rtl"))var s={top:l.callerTopPosition,left:"initial",right:l.callerleftPosition,marginTop:l.marginTopSize,opacity:.87};else s={top:l.callerTopPosition,left:l.callerleftPosition,right:"initial",marginTop:l.marginTopSize,opacity:.87};t.css({opacity:0,display:"block"}),o?t.css(s):t.animate(s)}},_closePrompt:function(e){var t=E._getPrompt(e);t&&t.fadeTo("fast",0,function(){t.closest(".formError").remove()})},closePrompt:function(e){return E._closePrompt(e)},_getPrompt:function(e){var t=T(e).closest("form, .validationEngineContainer").attr("id"),a=E._getClassName(e.attr("id"))+"formError",r=T("."+E._escapeExpression(a)+".parentForm"+E._getClassName(t))[0];if(r)return T(r)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var t=T(document),a=T("body"),r=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase();return Boolean(r)},_calculatePosition:function(e,t,a){var r,i,n,o=e.width(),l=e.position().left,s=e.position().top;e.height();r=i=0,n=-t.height();var u=e.data("promptPosition")||a.promptPosition,d="",c="",f=0,p=0;switch("string"==typeof u&&-1!=u.indexOf(":")&&(d=u.substring(u.indexOf(":")+1),u=u.substring(0,u.indexOf(":")),-1!=d.indexOf(",")&&(c=d.substring(d.indexOf(",")+1),d=d.substring(0,d.indexOf(",")),p=parseInt(c),isNaN(p)&&(p=0)),f=parseInt(d),isNaN(d)&&(d=0)),u){default:case"topRight":i+=l+o-27,r+=s;break;case"topLeft":r+=s,i+=l;break;case"centerRight":r=s+4,n=0,i=l+e.outerWidth(!0)+5;break;case"centerLeft":i=l-(t.width()+2),r=s+4,n=0;break;case"bottomLeft":r=s+e.height()+5,n=0,i=l;break;case"bottomRight":i=l+o-27,r=s+e.height()+5,n=0;break;case"inline":n=r=i=0}return{callerTopPosition:(r+=p)+"px",callerleftPosition:(i+=f)+"px",marginTopSize:n+"px"}},_saveOptions:function(e,t){if(T.validationEngineLanguage)var a=T.validationEngineLanguage.allRules;else T.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");T.validationEngine.defaults.allrules=a;var r=T.extend(!0,{},T.validationEngine.defaults,t);return e.data("jqv",r),r},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,a,r){var i,n;for(i=a+1;i<t.length;i++)if((n=jQuery("#"+t[i]).first()).length&&null==E._required(n,["required"],0,r,!0))return E._required(e,["required"],0,r)},_submitButtonClick:function(e){var t=T(this);t.closest("form, .validationEngineContainer").data("jqv_submitButton",t.attr("id"))}};T.fn.validationEngine=function(e){var t=T(this);return t[0]?"string"==typeof e&&"_"!=e.charAt(0)&&E[e]?("showPrompt"!=e&&"hide"!=e&&"hideAll"!=e&&E.init.apply(t),E[e].apply(t,Array.prototype.slice.call(arguments,1))):"object"!=typeof e&&e?void T.error("Method "+e+" does not exist in jQuery.validationEngine"):(E.init.apply(t,arguments),E.attach.apply(t)):t},T.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,ignoreFieldsWithClass:"ignoreMe",promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:T.noop,onBeforeAjaxFormValidation:T.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,notEmpty:!1,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:300,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},T(function(){T.validationEngine.defaults.promptPosition=E.isRTL()?"topLeft":"topRight"})}(jQuery),function(e){e.fn.validationEngineLanguage=function(){},e.validationEngineLanguage={newLang:function(){e.validationEngineLanguage.allRules={required:{regex:"none",alertText:"* Необходимо заполнить",alertTextCheckboxMultiple:"* Вы должны выбрать вариант",alertTextCheckboxe:"* Необходимо отметить"},requiredInFunction:{func:function(e,t,a,r){return"test"==e.val()},alertText:"* Значением поля должно быть test"},minSize:{regex:"none",alertText:"* Пароль должен состоять минимум из  ",alertText2:" символов"},maxSize:{regex:"none",alertText:"* Максимум ",alertText2:" символа(ов)"},groupRequired:{regex:"none",alertText:"* Вы должны заполнить одно из следующих полей"},min:{regex:"none",alertText:"* Минимальное значение "},max:{regex:"none",alertText:"* Максимальное значение "},past:{regex:"none",alertText:"* Дата до "},future:{regex:"none",alertText:"* Дата от "},maxCheckbox:{regex:"none",alertText:"* Нельзя выбрать столько вариантов"},minCheckbox:{regex:"none",alertText:"* Пожалуйста, выберите ",alertText2:" опцию(ии)"},equals:{regex:"none",alertText:"* Пароли не совпадают, повторите попытку!"},creditCard:{regex:"none",alertText:"* Неверный номер кредитной карты"},phone:{regex:/^([\+][0-9]{1,3}([ \.\-])?)?([\(][0-9]{1,6}[\)])?([0-9 \.\-]{1,32})(([A-Za-z \:]{1,11})?[0-9]{1,4}?)$/,alertText:"* Неправильный формат телефона"},email:{regex:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,alertText:"* Неверный формат email"},integer:{regex:/^[\-\+]?\d+$/,alertText:"* Не целое число"},number:{regex:/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,alertText:"* Неправильное число с плавающей точкой"},date:{regex:/^(0[1-9]|[12][0-9]|3[01])[ \.](0[1-9]|1[012])[ \.](19|20)\d{2}$/,alertText:"* Неправильная дата (должно быть в ДД.MM.ГГГГ формате)"},dateUTF:{regex:/^(19|20)\d{2}[ \.-](0[1-9]|1[012])[ \.-](0[1-9]|[12][0-9]|3[01])$/,alertText:"* Неправильная дата (должно быть в ГГГГ.ММ.ДД формате)"},datetime:{regex:/^(0[1-9]|[12][0-9]|3[01])[ \.-](0[1-9]|1[012])[ \.-](19|20)\d{2}[ \.-](([0,1][0-9])|(2[0-3])):[0-5][0-9]$/,alertText:"* Неправильная дата (должно быть в ДД.MM.ГГГГ ЧЧ:ММ формате)"},time:{regex:/^(([0,1][0-9])|(2[0-3])):[0-5][0-9]$/,alertText:"* Неправильное время (должно быть в ЧЧ:ММ формате)"},ipv4:{regex:/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,alertText:"* Неправильный IP-адрес"},url:{regex:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,alertText:"* Неправильный URL"},onlyNumberSp:{regex:/^[0-9\ ]+$/,alertText:"* Только числа"},onlyLetterSp:{regex:/^[a-zA-Z\u0400-\u04FF\ \']+$/,alertText:"* Только буквы"},onlyLetterNumber:{regex:/^[0-9a-zA-Z\u0400-\u04FF]+$/,alertText:"* Запрещены специальные символы"},ajaxUserCall:{url:"ajaxValidateFieldUser",extraData:"name=eric",alertText:"* Этот пользователь уже занят",alertTextLoad:"* Проверка, подождите..."},ajaxNameCall:{url:"ajaxValidateFieldName",alertText:"* Это имя уже занято",alertTextOk:"* Это имя доступно",alertTextLoad:"* Проверка, подождите..."},validate2fields:{alertText:"* Пожалуйста, введите HELLO"}}}},e.validationEngineLanguage.newLang()}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(E){var r,e=navigator.userAgent,k=/iphone/i.test(e),i=/chrome/i.test(e),D=/android/i.test(e);E.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},E.fn.extend({caret:function(e,t){var a;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((a=this.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",e),a.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),e=0-a.duplicate().moveStart("character",-1e5),t=e+a.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,F){var a,x,h,_,C,b,T;if(!t&&0<this.length){var e=E(this[0]).data(E.mask.dataName);return e?e():void 0}return F=E.extend({autoclear:E.mask.autoclear,placeholder:E.mask.placeholder,completed:null},F),a=E.mask.definitions,x=[],h=b=t.length,_=null,E.each(t.split(""),function(e,t){"?"==t?(b--,h=e):a[t]?(x.push(new RegExp(a[t])),null===_&&(_=x.length-1),e<h&&(C=x.length-1)):x.push(null)}),this.trigger("unmask").each(function(){function o(){if(F.completed){for(var e=_;e<=C;e++)if(x[e]&&v[e]===l(e))return;F.completed.call(p)}}function l(e){return F.placeholder.charAt(e<F.placeholder.length?e:0)}function s(e){for(;++e<b&&!x[e];);return e}function u(e,t){var a,r;if(!(e<0)){for(a=e,r=s(t);a<b;a++)if(x[a]){if(!(r<b&&x[a].test(v[r])))break;v[a]=v[r],v[r]=l(r),r=s(r)}c(),p.caret(Math.max(_,e))}}function n(){f(),p.val()!=g&&p.change()}function d(e,t){var a;for(a=e;a<t&&a<b;a++)x[a]&&(v[a]=l(a))}function c(){p.val(v.join(""))}function f(e){var t,a,r,i=p.val(),n=-1;for(r=t=0;t<b;t++)if(x[t]){for(v[t]=l(t);r++<i.length;)if(a=i.charAt(r-1),x[t].test(a)){v[t]=a,n=t;break}if(r>i.length){d(t+1,b);break}}else v[t]===i.charAt(r)&&r++,t<h&&(n=t);return e?c():n+1<h?F.autoclear||v.join("")===m?(p.val()&&p.val(""),d(0,b)):c():(c(),p.val(p.val().substring(0,n+1))),h?t:_}var p=E(this),v=E.map(t.split(""),function(e,t){return"?"!=e?a[e]?l(t):e:void 0}),m=v.join(""),g=p.val();p.data(E.mask.dataName,function(){return E.map(v,function(e,t){return x[t]&&e!=l(t)?e:null}).join("")}),p.one("unmask",function(){p.off(".mask").removeData(E.mask.dataName)}).on("focus.mask",function(){var e;p.prop("readonly")||(clearTimeout(r),g=p.val(),e=f(),r=setTimeout(function(){p.get(0)===document.activeElement&&(c(),e==t.replace("?","").length?p.caret(0,e):p.caret(e))},10))}).on("blur.mask",n).on("keydown.mask",function(e){if(!p.prop("readonly")){var t,a,r,i=e.which||e.keyCode;T=p.val(),8===i||46===i||k&&127===i?(a=(t=p.caret()).begin,(r=t.end)-a==0&&(a=46!==i?function(e){for(;0<=--e&&!x[e];);return e}(a):r=s(a-1),r=46===i?s(r):r),d(a,r),u(a,r-1),e.preventDefault()):13===i?n.call(this,e):27===i&&(p.val(g),p.caret(0,f()),e.preventDefault())}}).on("keypress.mask",function(e){if(!p.prop("readonly")){var t,a,r,i=e.which||e.keyCode,n=p.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||i<32)&&i&&13!==i){if(n.end-n.begin!=0&&(d(n.begin,n.end),u(n.begin,n.end-1)),(t=s(n.begin-1))<b&&(a=String.fromCharCode(i),x[t].test(a))){if(function(e){var t,a,r,i;for(a=l(t=e);t<b;t++)if(x[t]){if(r=s(t),i=v[t],v[t]=a,!(r<b&&x[r].test(i)))break;a=i}}(t),v[t]=a,c(),r=s(t),D){setTimeout(function(){E.proxy(E.fn.caret,p,r)()},0)}else p.caret(r);n.begin<=C&&o()}e.preventDefault()}}}).on("input.mask paste.mask",function(){p.prop("readonly")||setTimeout(function(){var e=f(!0);p.caret(e),o()},0)}),i&&D&&p.off("input.mask").on("input.mask",function(){var e=p.val(),t=p.caret();if(T&&T.length&&T.length>e.length){for(f(!0);0<t.begin&&!x[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<_&&!x[t.begin];)t.begin++;p.caret(t.begin,t.begin)}else{for(f(!0);t.begin<b&&!x[t.begin];)t.begin++;p.caret(t.begin,t.begin)}o()}),f()})}})});
